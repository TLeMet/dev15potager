<app-navbar-perso></app-navbar-perso>
<br><br><br>

<div class="row">
    <div class="col-sm-1"></div>
    <div class="col-sm-5 couleurfond">
        <h2>Info potager</h2>     
        <table>
            <col width="130px">
            <col width="130px">
            <col width="130px">
            <col width="130px">
            <col width="130px">
            <col width="130px">
            <thead>
                <tr>
                    <th >Nom du potager</th>
                    <th >Adresse</th>
                    <th >Ville</th>
                    <th >Surface</th>
                    <th >Description</th>
                    <th *ngIf="visible" mat-button>Modifier</th>
                </tr>
            </thead>
            
            <tbody>
                <tr>
                    <td>{{potagerActif.nom}}</td>
                    <td>{{potagerActif.adresse}}</td>
                    <td>{{potagerActif.ville}}</td>
                    <td>{{potagerActif.surface}} m²</td>
                    <td>{{potagerActif.description}}</td>
                    <td *ngIf="visible">
                        <button (click)="modifDetailTerrain()" class="text-center" style="background-color:darkturquoise" button mat-mini-fab>
                        <mat-icon>edit</mat-icon>
                        </button>
                    </td>
                </tr>
            </tbody>
            
        </table>

        <hr>
        <h2>Membres</h2>
        <table>
                <col width="170px">
                <col width="170px">
                <col width="170px">
                <col width="170px">
                <col width="170px">
            <thead>
                <tr>
                    <th>Nom</th>
                    <th>Prenom</th>
                    <th>Mail</th>
                    <th>Téléphone</th>
                    <th>Exclure</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let m of datamembres">
                    <td>{{m.user.nom}}</td>
                    <td>{{m.user.prenom}}</td>
                    <td>{{m.user.mail}}</td>
                    <td>{{m.user.tel}}</td>
                    <td><button class="btn btn-primary" *ngIf="isProprio(m.user)" (click)= exclureUser(m.user) style="background-color:rgb(255, 148, 148)" button mat-mini-fab>
                        <mat-icon>highlight_off</mat-icon>
                    </button></td>  
                </tr>
            </tbody>
        </table>



        <hr>
        <div *ngIf="visible">
        <h2>Demandes d'adhésion à votre potager</h2>
        <!-- Cacher si le gars n'est pas proprio -->
        
            <table>
                <col width="170px">
                <col width="170px">
                <col width="170px">
                <col width="170px">
                <col width="170px">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Prenom</th>
                        <th>Téléphone</th>
                        <th>Date de la demande</th>
                        <th>Consulter</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let d of datademandes">
                        <td>{{d.user.nom}}</td>
                        <td>{{d.user.prenom}}</td>
                        <td>{{d.user.tel}}</td>
                        <td>{{d.dateDemande}}</td>
                        <td><button mat-mini-fab aria-label="Example icon-button with a heart icon" (click) = openDemande(d)>
                                <mat-icon>search</mat-icon>
                        </button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="col-sm-5">
        <h2 class="text-center">Actualités du potager</h2>
        <hr>
        <div class="row"> 
            <div class="col-sm-6">
                <h5 class="text-center">Messagerie de groupe</h5>
                <br>
                <table>
                    <tr *ngFor="let m of messages">
                        <td>
                            <strong>{{m.auteur.prenom}}</strong> : {{m.message}} <br> <p style="font-size: x-small;">{{m.dateMessage | UTCDate}}</p>
                        </td> 
                    </tr>
                </table>              
                    <div class="form-group">
                        <textarea class="form-control" name="message" placeholder="Discuter..." rows=4 [(ngModel)]="newMessage.message"></textarea>                     
                    </div>
                    <div class="text-center">
                        <button (click)="posterMessage()" class="btn btn-secondary">poster</button>
                    </div>
                <br>
            

            </div>
            <div class="col-sm-1"></div>
            <div class="col-sm-4">
                <h5 class="text-center">Photos</h5>
                <br>
                <table>
                    <tr>
                        <td>
                            
                        </td>
                    </tr>
                </table>
                <ul>
                    <li *ngFor="let card of CardList">
                        <mat-card class="example-card" fxLayoutAlign="start start">
                            <img mat-card-image src="https://material.angular.io/assets/img/examples/shiba2.jpg" alt="Photo of a Shiba Inu">
                            <p>Description</p>
                        </mat-card>
                    </li>
                </ul>
                <br>
                <div class="scrollable">
                        <div class="scrollable-content">

                        </div>
                      </div>
                <button mat-raised-button (click)="RajoutCard()">
                    <mat-icon>add_circle</mat-icon>
                </button>
            </div>
            <div class="col-sm-1"></div>
        </div>
        <div class="text-center">
            <app-apimaps></app-apimaps>
        </div>

    </div>
    <div class="col-sm-1"></div>
</div>
<br><br>

<div class="row">
    <div class="col-sm-1"></div>
    <div class="col-sm-5">
        <hr>
        <h2>Messagerie</h2>
        <app-calendar></app-calendar>
    </div>
    <div class="col-sm-5"></div>
    <div class="col-sm-1"></div>
</div>

