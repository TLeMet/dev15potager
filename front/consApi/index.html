<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <!-- Ajax -->
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.3.min.js"></script>
    <title>Consommer API</title>
</head>

<body>

    <script>
        /*Je stocke dans ma variable la liste des personnes */
        var uri = "http://localhost:8087/personnes";
        
        $(function(){
            // Ligne suivante : grâce à Ajax
            $.getJSON(uri).done(function(data){
                // Ligne suivante : grâce à JQuery
                $.each(data, function(key, item){
                    $('<li>', {text: formatItem(item)})
                        .appendTo($('#users'));
                });
            });
        });
        
        // Manière d'écrire la fonction : JavaScript pur
        function formatItem(item){
            return item.id + ' : ' + item.nom + ' | ' + item.prenom + ' | ' + item.mail + ' | ' + item.age;
        }


        function chercher(){
            // On récupère l'input avec #idUser
            var id = $('#idUser').val();
            $.getJSON(uri + '/' + id).done(
                function(data){
                    $('#user').text(formatItem(data));
                }
            )
        }



        </script>




    <h1 class="text-center">Consommer API</h1>

    <div class="container">
        <div class="row">
            <div class="col-sm-6">
            </ul>
                <h4>Listes des users :</h4>
                <ul id="users">

                </ul>
            </div>

            <div class="col-sm-6 text-center">
                <h4>User par id :</h4>
                <div class="row">
                    <div class="col-sm-6">
                        <input type="text" class="form-control text-center" id="idUser">
                    </div>
                    <div class="col-sm-6">
                        <input type="button" class="btn btn-primary" value="Yeah" onclick="chercher()">
                    </div>

                    <br><br><br>

                    <div class="col-sm-6">
                        <p id="user" style="color: steelblue; letter-spacing: 3px;">
                    </div>
                </div>

            </div>


        </div>
    </div>
</body>
</html>